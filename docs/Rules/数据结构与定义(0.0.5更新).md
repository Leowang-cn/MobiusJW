# 数据文件mobius_data.sqlite3结构
## 表1:模块
### 表名称
modules
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `module_id` | `TEXT` | `PRIMARY KEY`, `CHECK (module_id GLOB '[0-9][0-9][0-9][0-9]' AND length(module_id) = 4)` | **主键**。模块的唯一标识符。必须是**长度恰好为4位**的**纯数字字符串**（例如：`"0001"`, `"1234"`）。前导零会被保留。 |
| `module_name` | `TEXT` | ` NOT NULL` ,`CHECK (length(module_name) <= 10)` | **模块名称**。模块的名称或标题。可包含任意字符（中文、英文、符号等），但**长度不能超过10个字符**。 |
| `module_type` | `TEXT` | `CHECK (module_type IN ('知识', '思想', '模型'))` | **模块类型**。表示模块的类别或性质。**值必须是预定义列表中的一个**：`"知识"`, `"思想"`, `"模型"`。|

## 表2:标签
### 表名称
tags
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints)  | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `tag_id` | `TEXT` | `PRIMARY KEY`, `CHECK (tag_id GLOB '[0-9][0-9][0-9][0-9][0-9]' AND length(tag_id) = 5)` | **主键**。标签的唯一标识符。必须是**长度恰好为5位**的**纯数字字符串**（例如：`"00001"`, `"12345"`）。前导零会被保留。 |
| `module_id` | `TEXT` | ` NOT NULL` ,`FOREIGN KEY REFERENCES modules(module_id)` | **外键**。引用 `modules` 表的 `module_id`，表示该标签所属的模块。 |
| `tag_name`  | `TEXT` | ` NOT NULL` ,`CHECK (length(tag_name) <= 25)` | **标签名称**。标签的名称或标题。可包含任意字符（中文、英文、符号等），但**长度不能超过25个字符**。 |
| `tag_intro` | `TEXT` | `CHECK (length(tag_intro) <= 100)` | **标签介绍**。对标签含义或用途的简要描述。可包含任意字符，但**长度不能超过100个字符**。 |

## 表3:题目
%% 0.0.4:新增:
    - 题目用途（item_usage），用于标记一道题目初步可以作为例题和练习（此例题和练习标记和题组的练习标记不通）
    - 题目介绍（item_intro),用于记录一道题目的讲解思路和注意事项。
### 表名称
items
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `item_id` | `TEXT` | `PRIMARY KEY`, `CHECK (item_id GLOB '*[0-9A-Za-z-]*' AND length(item_id) <= 64 AND item_id NOT GLOB '*[^0-9A-Za-z-]*')` | **主键**。题目的唯一标识符。必须是**长度不超过64个字符**的字符串，且**仅包含数字 (`0-9`)、大小写字母 (`a-z`, `A-Z`) 和连字符 (`-`)**。示例：`"5b03b34Y6LmYsOkVfihaNGaupl72XvGiwB9XAs2imx8LeXtHy1kzho"`。 |
| `item_level` | `INTEGER` | `CHECK (item_level IN (1, 2, 3, 4))` | **题目难度**。表示题目的难度等级。**值必须是预定义列表中的一个整数**：`1`, `2`, `3`, `4`。 |
| `item_usage` | `TEXT` | `CHECK (item_usage IN ('例', '练') OR item_usage IS NULL)` | **题目用途**（可选）。用于标记题目初步的使用场景。可选值包括：`'例'`、`'练'`。**该字段可以为空 (`NULL`)，表示用途尚未确定或不适用**。 |
| `item_intro` | `TEXT` | `CHECK (length(item_intro) <= 200)` | **讲解思路**。对题目的讲解思路和注意事项做简要描述。可包含任意字符，但**长度不能超过200个字符**。 |


## 表4:题目标签关系
### 表名称
item_tag_relations
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `item_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES items(item_id) ON DELETE CASCADE` | **外键**。引用 `items` 表的主键 `item_id`，表示该关系所属的题目。`ON DELETE CASCADE` 表示当对应的题目被删除时，此关系记录也会被自动删除。 |
| `tag_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES tags(tag_id) ON DELETE CASCADE` | **外键**。引用 `tags` 表的主键 `tag_id`，表示该关系所属的标签。`ON DELETE CASCADE` 表示当对应的标签被删除时，此关系记录也会被自动删除。 |
| (复合主键)  |  | `PRIMARY KEY (item_id, tag_id)` | **复合主键**。由 `item_id` 和 `tag_id` 共同组成主键。这确保了**同一个题目和同一个标签的组合只能出现一次**，防止了重复关联。 |

## 表5:学生
### 表名称
students
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `student_id` | `TEXT` | `PRIMARY KEY`, `CHECK (student_id GLOB '[0-9][0-9][0-9][0-9][0-9][0-9]' AND length(student_id) = 6)` | **主键**。学生的唯一标识符。必须是**长度恰好为6位**的**纯数字字符串**（例如：`"000001"`, `"123456"`）。前导零会被保留。 |
| `student_name` | `TEXT` | `NOT NULL, CHECK (length(student_name) <= 10)` | **学生名称**。学生的姓名。可包含任意字符（中文、英文、符号等），但**长度不能超过10个字符**。 |

## 表6:学生题目关系
### 表名称
student_item_relations
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `student_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES students(student_id)` | **外键**。引用 `students` 表的主键 `student_id`，表示该关系所属的学生。 |
| `item_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES items(item_id)` | **外键**。引用 `items` 表的主键 `item_id`，表示该关系所关联的题目。 |
| `date_created` | `TEXT` | `NOT NULL` | **创建时间**。记录该关系（如练习、收藏等）创建的日期和时间。建议使用 ISO8601 格式存储，例如：`"2025-08-27 14:30:00"`。 |
| (复合主键) |  | `PRIMARY KEY (student_id, item_id)` | **复合主键**。由 `student_id` 和 `item_id` 共同组成主键。这确保了**同一个学生对同一个题目的关系记录只能存在一条**。 |

## 表7:题簇
### 表名称
clusters
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `cluster_id` | `TEXT` | `PRIMARY KEY`, `CHECK (cluster_id GLOB '[0-9][0-9][0-9][0-9][0-9][0-9]' AND length(cluster_id) = 6)` | **主键**。题簇的唯一标识符。必须是**长度恰好为6位**的**纯数字字符串**（例如：`"000001"`, `"123456"`）。前导零会被保留。 |
| `cluster_name` | `TEXT` | `NOT NULL`, `CHECK (length(cluster_name) <= 20)` | **题簇名称**。题簇的名称或标题。可包含任意字符（中文、英文、符号等），但**长度不能超过20个字符**。 |
| `cluster_intro` | `TEXT` | `CHECK (length(cluster_intro) <= 100)` | **题簇介绍**。对题簇内容的简要描述或介绍。可包含任意字符，但**长度不能超过100个字符**。 |
| `module_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES modules(module_id)` | **外键**。引用 `modules` 表的 `module_id`，表示该题簇所属的模块。**不能为空**。 |
| `tag_id` | `TEXT` | `FOREIGN KEY REFERENCES tags(tag_id)` | **外键**。引用 `tags` 表的 `tag_id`，表示该题簇关联的标签。**可以为空**（一个题簇可能不关联特定标签，或关联多个标签时需用关联表）。 |

## 表8:题组
### 表名称
groups
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `group_id` | `TEXT` | `PRIMARY KEY`, `CHECK (group_id GLOB '[0-9][0-9][0-9][0-9][0-9][0-9]' AND length(group_id) = 6)` | **主键**。题组的唯一标识符。必须是**长度恰好为6位**的**纯数字字符串**（例如：`"000001"`, `"123456"`）。前导零会被保留。 |
| `group_name` | `TEXT` | `NOT NULL`, `CHECK (length(group_name) <= 20)` | **题组名称**。题组的名称或标题。可包含任意字符（中文、英文、符号等），但**长度不能超过20个字符**。**不能为空**。 |
| `group_level` | `TEXT` | `CHECK (group_level IN ('基础', '进阶', '疯狂', '暴躁'))` | **题组层次**。表示题组的难度或级别。**值必须是预定义列表中的一个**：`"基础"`, `"进阶"`, `"疯狂"`, `"暴躁"`。 |
| `cluster_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES clusters(cluster_id)` | **外键**。引用 `clusters` 表的 `cluster_id`，表示该题组所属的题簇。**不能为空**，一个题组必须归属于一个题簇。 |
| `group_intro` | `TEXT` | `CHECK (length(group_intro) <= 100)` | **题组介绍**。对题组内容的简要描述或介绍。可包含任意字符，但**长度不能超过100个字符**。 |

## 表9:题组的例题
### 表名称
group_examples
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `group_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES groups(group_id) ON DELETE CASCADE` | **外键**。引用 `groups` 表的 `group_id`。 |
| `item_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES items(item_id)` | **外键**。引用 `items` 表的 `item_id`，表示一个例题。 |
| (复合主键) | | `PRIMARY KEY (group_id, item_id)` | **复合主键**。确保一个题组内的例题不重复。 |

## 表10:题组的练习
### 表名称
group_exercises
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `group_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES groups(group_id) ON DELETE CASCADE` | **外键**。引用 `groups` 表的 `group_id`。 |
| `item_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES items(item_id)` | **外键**。引用 `items` 表的 `item_id`，表示一个练习题。 |
| (复合主键) | | `PRIMARY KEY (group_id, item_id)` | **复合主键**。确保一个题组内的练习题不重复。 |


%% 0.0.5新增

## 表11:判断题
### 表名称
TF_question
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `TF_question_id` | `TEXT` | `PRIMARY KEY`, `CHECK (TF_question_id GLOB 'TF[0-9][0-9][0-9][0-9][0-9]' AND length(TF_question_id) = 7)` | **主键**。判断题的唯一标识符。必须是**长度恰好为7位**的字符串，格式为 `"TF"` 后跟**5个数字**（例如：`"TF00001"`, `"TF12345"`）。前导零会被保留。 |
| `TF_question_text` | `TEXT` | `NOT NULL, CHECK (length(TF_question_text) <= 100)` | **题目文本**。判断题的具体内容。可包含任意字符，但**长度不能超过100个字符**。 |
| `TF_question_ans` | `BOOLEAN` | `NOT NULL` | **答案**。该判断题的正确答案，仅有 **`TRUE`（正确）** 或 **`FALSE`（错误）** 两个取值。 |

## 表12:判断题的标签关系
### 表名称
TF_tag_relations
### 表结构
| 字段名 (Column Name) | 数据类型 (Data Type) | 约束 (Constraints) | 说明 (Description) |
| :--- | :--- | :--- | :--- |
| `tag_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES tags(tag_id)` | **外键**。引用 `tags` 表的 `tag_id`。 |
| `TF_question_id` | `TEXT` | `NOT NULL`, `FOREIGN KEY REFERENCES TF_questions(TF_question_id) ON DELETE CASCADE` | **外键**。引用 `TF_questions` 表的 `TF_question_id`，表示一个判断题。 |
| (复合主键) | | `PRIMARY KEY (tag_id, TF_question_id)` | **复合主键**。确保一个标签下的判断题不重复。 |